<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>قائمة الطعام | Menu</title>
    <!-- خطوط عربية جميلة -->
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700;800&display=swap" rel="stylesheet">
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- أيقونات -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- SweetAlert2 للتنبيهات -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    
    <style>
        :root {
            --glass-bg: rgba(255, 255, 255, 0.25);
            --primary-color: #ff9f1c;
            --text-color: #2d3748;
        }

        body {
            font-family: 'Tajawal', sans-serif;
            background: linear-gradient(45deg, #ff9a9e 0%, #fad0c4 99%, #fad0c4 100%);
            background-size: 400% 400%;
            animation: gradientBG 15s ease infinite;
            min-height: 100vh;
            overflow-x: hidden;
            color: var(--text-color);
            padding-bottom: 90px;
        }

        @keyframes gradientBG {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* تنسيقات الزجاج */
        .glass-panel {
            background: rgba(255, 255, 255, 0.45);
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            border: 1px solid rgba(255, 255, 255, 0.6);
            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.1);
            border-radius: 20px;
        }

        .glass-card {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.6), rgba(255, 255, 255, 0.2));
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.5);
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
            border-radius: 16px;
            transition: transform 0.1s ease, box-shadow 0.3s ease;
            transform-style: preserve-3d;
            perspective: 1000px;
        }
        
        /* Category Buttons */
        .category-btn {
            background: rgba(255, 255, 255, 0.4);
            border: 1px solid rgba(255, 255, 255, 0.5);
            transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
        }

        .category-btn.active, .category-btn:hover {
            background: #ff9f1c;
            color: white;
            border-color: #ff9f1c;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 159, 28, 0.3);
            font-weight: 700;
        }

        /* Floating Cart Button */
        .cart-float-btn {
            position: fixed;
            bottom: 25px;
            left: 25px;
            width: 75px;
            height: 75px;
            background: #25D366; 
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 32px;
            box-shadow: 0 10px 25px rgba(37, 211, 102, 0.4);
            cursor: pointer;
            z-index: 100;
            transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            border: 3px solid rgba(255,255,255,0.7);
        }
        .cart-float-btn:hover {
            transform: scale(1.1) rotate(-10deg);
        }
        .cart-badge {
            position: absolute;
            top: 0;
            right: 0;
            background: #ff0000;
            color: white;
            font-size: 14px;
            width: 26px;
            height: 26px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            border: 2px solid white;
        }

        /* Modal Overlay */
        .modal-overlay {
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(0,0,0,0.5);
            backdrop-filter: blur(8px);
            z-index: 200;
            display: none;
            justify-content: center;
            align-items: center;
            opacity: 0;
            transition: opacity 0.3s;
            padding: 15px;
        }
        .modal-overlay.open {
            display: flex;
            opacity: 1;
        }
        .cart-modal {
            width: 100%;
            max-width: 450px;
            max-height: 85vh;
            display: flex;
            flex-direction: column;
            transform: scale(0.9);
            transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            overflow: hidden;
        }
        .modal-overlay.open .cart-modal {
            transform: scale(1);
        }

        /* Scrollbar */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-thumb { background: rgba(0,0,0,0.2); border-radius: 10px; }

        .price-tag {
            background: rgba(255, 255, 255, 0.7);
            padding: 4px 12px;
            border-radius: 20px;
            font-weight: bold;
            color: #d35400;
        }

        /* Background Shapes */
        .shape {
            position: fixed;
            border-radius: 50%;
            filter: blur(50px);
            z-index: -1;
            animation: float 20s infinite;
        }
        .shape-1 { background: #ff9f1c; width: 300px; height: 300px; top: -100px; left: -100px; opacity: 0.5; }
        .shape-2 { background: #2ec4b6; width: 400px; height: 400px; bottom: -100px; right: -100px; opacity: 0.5; }
        
        @keyframes float {
            0% { transform: translate(0, 0) rotate(0deg); }
            50% { transform: translate(20px, 20px) rotate(10deg); }
            100% { transform: translate(0, 0) rotate(0deg); }
        }
    </style>
</head>
<body class="p-3 md:p-6">

    <div class="shape shape-1"></div>
    <div class="shape shape-2"></div>

    <div class="max-w-7xl mx-auto">
        <!-- Header -->
        <header class="text-center mb-8 relative z-10">
            <h1 class="text-4xl md:text-5xl font-extrabold text-white drop-shadow-lg mb-2">قائمة الطعام</h1>
            <p class="text-white text-lg opacity-90 drop-shadow-md">اطلب مباشرة عبر الواتساب</p>
        </header>

        <!-- Categories -->
        <div class="glass-panel p-2 mb-6 sticky top-2 z-40 overflow-x-auto whitespace-nowrap flex gap-3 no-scrollbar" id="categoryContainer"></div>

        <!-- Menu Grid -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 pb-24" id="menuGrid"></div>
    </div>

    <!-- Floating Cart Button -->
    <div class="cart-float-btn" onclick="toggleCart()">
        <i class="fa-brands fa-whatsapp"></i>
        <div class="cart-badge" id="cartBadge">0</div>
    </div>

    <!-- Cart Modal -->
    <div class="modal-overlay" id="cartModalOverlay">
        <div class="glass-panel cart-modal shadow-2xl relative">
            
            <!-- Modal Header -->
            <div class="p-4 border-b border-gray-200/30 flex justify-between items-center bg-white/30 sticky top-0 z-10">
                <h2 class="text-xl font-bold text-gray-800 flex items-center gap-2">
                    <i class="fa-solid fa-list-check text-orange-500"></i>
                    قائمة طلباتك
                </h2>
                <button onclick="toggleCart()" class="text-gray-600 hover:text-red-500 transition-colors w-8 h-8 flex items-center justify-center rounded-full hover:bg-white/50">
                    <i class="fa-solid fa-xmark text-2xl"></i>
                </button>
            </div>
            
            <!-- Items Content -->
            <div class="overflow-y-auto p-4 flex-grow custom-scroll" id="cartItemsContainer" style="min-height: 150px;">
                <div class="text-center text-gray-500 py-10">السلة فارغة حالياً</div>
            </div>

            <!-- Modal Footer -->
            <div class="p-4 border-t border-gray-200/30 bg-white/30 sticky bottom-0 z-10">
                <div class="flex justify-between items-center mb-4 text-lg font-bold text-gray-800 bg-white/40 p-3 rounded-xl shadow-sm">
                    <span>المجموع:</span>
                    <span id="cartTotal" class="text-orange-600 text-xl">0 د.ع</span>
                </div>
                
                <!-- Direct Whatsapp Button (No Forms) -->
                <button onclick="sendToWhatsapp()" class="w-full bg-[#25D366] hover:bg-[#128C7E] text-white font-bold py-4 px-4 rounded-xl shadow-lg transform transition active:scale-95 flex justify-center items-center gap-3">
                    <span class="text-lg">إرسال الطلب الآن</span>
                    <i class="fa-brands fa-whatsapp text-3xl"></i>
                </button>
            </div>
        </div>
    </div>

    <!-- JavaScript logic -->
    <script>
        // Data derived from uploaded images
        const menuData = [
            {
                category: "المشويات",
                icon: "fa-fire",
                items: [
                    { id: 101, name: "نفر كباب لحم", price: 7500, desc: "لحم عراقي فاخر" },
                    { id: 102, name: "نصف نفر كباب لحم", price: 5000, desc: "" },
                    { id: 103, name: "نفر كباب دجاج", price: 6500, desc: "" },
                    { id: 104, name: "نصف نفر كباب دجاج", price: 4500, desc: "" },
                    { id: 105, name: "نفر تكه دجاج", price: 7000, desc: "" },
                    { id: 106, name: "نفر مشكل كباب", price: 7500, desc: "" },
                    { id: 107, name: "نفر اجنحة", price: 7000, desc: "مشوي على الفحم" },
                    { id: 108, name: "نفر كباب لحم مع التمن", price: 8500, desc: "مع السلطة والخبز" },
                    { id: 109, name: "كيلو كباب لحم سفري", price: 18000, desc: "عرض خاص" },
                    { id: 110, name: "دجاج مشوي", price: 8500, desc: "مع السلطة والخبز" },
                    { id: 111, name: "نصف دجاج مشوي", price: 4500, desc: "" }
                ]
            },
            {
                category: "شاورما وبركر",
                icon: "fa-burger",
                items: [
                    { id: 201, name: "نفر شاورما لحم", price: 4500, desc: "مع التمن والسلطة والصمون" },
                    { id: 202, name: "نفر شاورما دجاج", price: 4000, desc: "مع التمن والسلطة والصمون" },
                    { id: 203, name: "سندويج شاورما لحم", price: 3000, desc: "مشوي بالطماطة والفلفل" },
                    { id: 204, name: "سندويج شاورما دجاج", price: 2750, desc: "" },
                    { id: 205, name: "همبركر لحم", price: 2750, desc: "لحم عراقي صافي" },
                    { id: 206, name: "همبركر لحم مع الجبن", price: 3000, desc: "" },
                    { id: 207, name: "همبركر كنتاكي", price: 3000, desc: "" },
                    { id: 208, name: "بركر لحم مع شاورما", price: 4000, desc: "سبيشال بركر تايم" },
                    { id: 209, name: "بركر لحم بالفطر", price: 3500, desc: "" }
                ]
            },
            {
                category: "البيتزا",
                icon: "fa-pizza-slice",
                items: [
                    { id: 301, name: "بيتزا مارغريتا (وسط)", price: 4000, desc: "" },
                    { id: 302, name: "بيتزا مارغريتا (كبير)", price: 6000, desc: "" },
                    { id: 303, name: "بيتزا شاورما لحم (وسط)", price: 6000, desc: "" },
                    { id: 304, name: "بيتزا شاورما لحم (كبير)", price: 8000, desc: "" },
                    { id: 305, name: "بيتزا شاورما دجاج (وسط)", price: 6000, desc: "" },
                    { id: 306, name: "بيتزا شاورما دجاج (كبير)", price: 8000, desc: "" },
                    { id: 307, name: "بيتزا سجق (وسط)", price: 6000, desc: "" },
                    { id: 308, name: "بيتزا سجق (كبير)", price: 8000, desc: "" }
                ]
            },
            {
                category: "كنتاكي وكريسبي",
                icon: "fa-drumstick-bite",
                items: [
                    { id: 401, name: "وجبة كريسبي (2 قطع)", price: 4500, desc: "مع فنكر وكولا" },
                    { id: 402, name: "وجبة كريسبي (3 قطع)", price: 5750, desc: "مع فنكر وكولا" },
                    { id: 403, name: "وجبة كريسبي (5 قطع)", price: 6750, desc: "2 فنكر + 2 كولا" },
                    { id: 404, name: "وجبة كنتاكي (4 قطع)", price: 7500, desc: "2 فنكر + 2 كولا" },
                    { id: 405, name: "وجبة كنتاكي (8 قطع)", price: 12750, desc: "وجبة عائلية" }
                ]
            },
            {
                category: "صاج وكومبير",
                icon: "fa-utensils",
                items: [
                    { id: 501, name: "صاج شاورما لحم", price: 5000, desc: "" },
                    { id: 502, name: "صاج شاورما دجاج", price: 4500, desc: "" },
                    { id: 503, name: "صاج همبركر", price: 4000, desc: "" },
                    { id: 504, name: "كومبير بالدجاج", price: 4500, desc: "بطاطا مشوية تركية" },
                    { id: 505, name: "كومبير باللحم", price: 5000, desc: "" },
                    { id: 506, name: "كومبير مشكل", price: 5500, desc: "" }
                ]
            },
            {
                category: "مقبلات وكشري",
                icon: "fa-bowl-food",
                items: [
                    { id: 601, name: "كشري بالدجاج", price: 4000, desc: "أكل مصري أصلي" },
                    { id: 602, name: "كشري سادة", price: 4500, desc: "" },
                    { id: 603, name: "ماعون فنكر صغير", price: 1000, desc: "" },
                    { id: 604, name: "ماعون فنكر كبير بالجبن", price: 3000, desc: "" },
                    { id: 605, name: "حلقات بصل تركي (وسط)", price: 3000, desc: "9 حلقات" },
                    { id: 606, name: "مقبلات مشكلة (وسط)", price: 3000, desc: "" }
                ]
            },
            {
                category: "العروض",
                icon: "fa-gift",
                items: [
                    { id: 701, name: "عرض فوريو", price: 6000, desc: "فلافل + بيتزا + فنكر + كولا" },
                    { id: 702, name: "عرض سوبر", price: 13750, desc: "3 بيتزا + فلافل + فنكر + مقبلات" },
                    { id: 703, name: "عرض خاص (مشكل)", price: 10750, desc: "همبركر + قص + كباب + صاج..." },
                    { id: 704, name: "عرض خاص (لحم بعجين)", price: 10750, desc: "همبركر + قص + 3 لحم بعجين..." }
                ]
            }
        ];

        let cart = [];
        let activeCategory = menuData[0].category;

        // Render Categories
        const categoryContainer = document.getElementById('categoryContainer');
        function renderCategories() {
            categoryContainer.innerHTML = '';
            menuData.forEach(cat => {
                const btn = document.createElement('button');
                btn.className = `category-btn px-4 py-2 rounded-full text-gray-800 font-bold whitespace-nowrap flex items-center gap-2 shadow-sm ${cat.category === activeCategory ? 'active' : ''}`;
                btn.innerHTML = `<i class="fa-solid ${cat.icon}"></i> ${cat.category}`;
                btn.onclick = () => {
                    activeCategory = cat.category;
                    renderCategories();
                    renderMenu();
                };
                categoryContainer.appendChild(btn);
            });
        }

        // Render Menu Grid
        const menuGrid = document.getElementById('menuGrid');
        function renderMenu() {
            menuGrid.innerHTML = '';
            const categoryData = menuData.find(c => c.category === activeCategory);
            
            categoryData.items.forEach((item, index) => {
                const card = document.createElement('div');
                card.className = 'glass-card p-4 relative flex flex-col justify-between h-full group cursor-pointer select-none';
                card.style.opacity = '0';
                card.style.animation = `fadeInUp 0.5s ease forwards ${index * 0.05}s`;
                
                card.innerHTML = `
                    <div class="mb-2">
                        <div class="flex justify-between items-start mb-1">
                            <h3 class="text-lg font-bold text-gray-900 leading-tight">${item.name}</h3>
                        </div>
                        <p class="text-sm text-gray-700 opacity-80 line-clamp-2">${item.desc || ''}</p>
                    </div>
                    <div class="flex justify-between items-center mt-auto pt-2 border-t border-white/40">
                        <span class="price-tag text-sm">${item.price.toLocaleString()} د.ع</span>
                        <button onclick="addToCart(${item.id})" class="w-9 h-9 rounded-full bg-orange-500 text-white flex items-center justify-center hover:bg-orange-600 transition-all transform active:scale-90 shadow-md">
                            <i class="fa-solid fa-plus"></i>
                        </button>
                    </div>
                `;

                card.addEventListener('mousemove', handleTilt);
                card.addEventListener('mouseleave', resetTilt);

                menuGrid.appendChild(card);
            });
        }

        // Cart Logic
        function addToCart(itemId) {
            let itemToAdd = null;
            menuData.forEach(cat => {
                const found = cat.items.find(i => i.id === itemId);
                if(found) itemToAdd = found;
            });

            if(!itemToAdd) return;

            const existingItem = cart.find(i => i.id === itemId);
            if(existingItem) {
                existingItem.qty++;
            } else {
                cart.push({ ...itemToAdd, qty: 1 });
            }

            const toast = Swal.mixin({
                toast: true,
                position: 'top',
                showConfirmButton: false,
                timer: 1000,
                background: 'rgba(255, 255, 255, 0.95)',
                color: '#333'
            });
            toast.fire({ icon: 'success', title: 'تمت الإضافة للسلة' });

            updateCartUI();
        }

        function removeFromCart(itemId) {
            cart = cart.filter(i => i.id !== itemId);
            updateCartUI();
        }

        function changeQty(itemId, delta) {
            const item = cart.find(i => i.id === itemId);
            if (item) {
                item.qty += delta;
                if (item.qty <= 0) removeFromCart(itemId);
                else updateCartUI();
            }
        }

        function updateCartUI() {
            // Badge
            const totalQty = cart.reduce((sum, item) => sum + item.qty, 0);
            document.getElementById('cartBadge').innerText = totalQty;
            document.getElementById('cartBadge').style.display = totalQty > 0 ? 'flex' : 'none';

            // Items Container
            const container = document.getElementById('cartItemsContainer');
            const totalEl = document.getElementById('cartTotal');
            
            if (cart.length === 0) {
                container.innerHTML = `<div class="flex flex-col items-center justify-center py-8 text-gray-500 opacity-70">
                    <i class="fa-solid fa-cart-arrow-down text-6xl mb-4"></i>
                    <p>السلة فارغة</p>
                </div>`;
                totalEl.innerText = "0 د.ع";
                return;
            }

            let totalPrice = 0;
            let html = '';

            cart.forEach(item => {
                const itemTotal = item.price * item.qty;
                totalPrice += itemTotal;
                html += `
                    <div class="flex justify-between items-center mb-3 bg-white/50 p-3 rounded-lg border border-white/60 shadow-sm">
                        <div class="flex-1">
                            <h4 class="font-bold text-gray-800 text-sm">${item.name}</h4>
                            <div class="text-xs text-gray-600">${item.price.toLocaleString()} د.ع</div>
                        </div>
                        <div class="flex items-center gap-3 bg-white/70 rounded-full px-2 py-1 shadow-inner mx-2">
                            <button onclick="changeQty(${item.id}, -1)" class="w-6 h-6 rounded-full bg-red-100 text-red-500 hover:bg-red-500 hover:text-white flex items-center justify-center font-bold text-xs transition">-</button>
                            <span class="font-bold text-gray-800 w-4 text-center text-sm">${item.qty}</span>
                            <button onclick="changeQty(${item.id}, 1)" class="w-6 h-6 rounded-full bg-green-100 text-green-600 hover:bg-green-500 hover:text-white flex items-center justify-center font-bold text-xs transition">+</button>
                        </div>
                        <div class="font-bold text-gray-700 text-sm w-16 text-left">
                            ${itemTotal.toLocaleString()}
                        </div>
                    </div>
                `;
            });

            container.innerHTML = html;
            totalEl.innerText = totalPrice.toLocaleString() + " د.ع";
        }

        function toggleCart() {
            const modal = document.getElementById('cartModalOverlay');
            if (modal.classList.contains('open')) {
                modal.classList.remove('open');
            } else {
                modal.classList.add('open');
                updateCartUI();
            }
        }

        document.getElementById('cartModalOverlay').addEventListener('click', (e) => {
            if(e.target === document.getElementById('cartModalOverlay')) toggleCart();
        });

        // --- Fast Checkout Function (No Validation) ---
        function sendToWhatsapp() {
            if (cart.length === 0) {
                Swal.fire({
                    icon: 'warning',
                    text: 'السلة فارغة',
                    confirmButtonColor: '#ff9f1c',
                    timer: 1500
                });
                return;
            }

            // Construct simple message
            let message = `*مرحباً، أرغب بطلب هذه القائمة:* \n\n`;
            
            let total = 0;
            cart.forEach((item, i) => {
                const itemTotal = item.price * item.qty;
                total += itemTotal;
                message += `▪️ ${item.name} (العدد: ${item.qty})\n`;
            });
            
            message += `\n*المجموع: ${total.toLocaleString()} د.ع*\n`;
            message += `\n(يرجى إرسال العنوان لتأكيد الطلب)`;

            const phoneNumber = "9647705330066"; 
            const url = `https://wa.me/${phoneNumber}?text=${encodeURIComponent(message)}`;

            window.open(url, '_blank');
        }

        // Tilt logic
        function handleTilt(e) {
            const card = e.currentTarget;
            const rect = card.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;
            const centerX = rect.width / 2;
            const centerY = rect.height / 2;
            const rotateX = ((y - centerY) / centerY) * -5;
            const rotateY = ((x - centerX) / centerX) * 5;
            card.style.transform = `perspective(1000px) rotateX(${rotateX}deg) rotateY(${rotateY}deg) scale(1.02)`;
        }
        function resetTilt(e) {
            e.currentTarget.style.transform = `perspective(1000px) rotateX(0deg) rotateY(0deg) scale(1)`;
        }

        // Init
        const styleSheet = document.createElement("style");
        styleSheet.innerText = `@keyframes fadeInUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }`;
        document.head.appendChild(styleSheet);
        renderCategories();
        renderMenu();
    </script>
</body>
</html>

